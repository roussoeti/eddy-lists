<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>eddyLists</title>

    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600' rel='stylesheet' type='text/css'>

    <link href="js/jquery.mobile-1.4.5.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <link href="js/jquery.mobile.icons-1.4.5.min.css" rel="stylesheet" />
    <link href="js/jquery.mobile.structure-1.4.5.css" rel="stylesheet" />

    <script src="js/jquery-1.11.2.min.js"></script>
    <script src="js/jquery.mobile-1.4.5.min.js"></script>

    <script>
        function getPersonalLists() {
            $.ajax({
                url: 'eddy-lists-server/eddy-lists-getlists.php',
                type: 'post',
                data: { accountname: 'etienne', pwd: 'q', listtype: 'personal' },
                success: function (output) {
                    $('#my-personal-lists').html("<li data-role=\"list-divider\">Mes listes personnelles</li>");
                    $('#my-personal-lists').append(output);
                    $('#my-personal-lists').trigger('create');
                    $('#my-personal-lists').listview('refresh');

                    $("#my-personal-lists a").click(function (e) {
                        $("#paListItems").data("id", this.id);
                    });
                }
            });
        }

        function getSharedLists() {
            $.ajax({
                url: 'eddy-lists-server/eddy-lists-getlists.php',
                type: 'post',
                data: { accountname: 'etienne', pwd: 'q', listtype: 'shared' },
                success: function (output) {
                    $('#my-shared-lists').html("<li data-role=\"list-divider\">Mes listes partagées</li>");
                    $('#my-shared-lists').append(output);
                    $('#my-shared-lists').trigger('create');
                    $('#my-shared-lists').listview('refresh');

                    $("#my-shared-lists a").click(function (e) {
                        $("#paListItems").data("id", this.id);
                    });
                }
            });
        }

        function getItems($id) {
            $.ajax({
                url: 'eddy-lists-server/eddy-lists-getitems.php',
                type: 'post',
                data: { accountname: 'etienne', pwd: 'q', idlist: $id },
                success: function (output) {
                    $('#my-list-item').html("<li data-role=\"list-divider\">Mes items</li>");
                    $('#my-list-item').append(output);
                    $('#my-list-item').trigger('create');
                    $('#my-list-item').listview('refresh');
                }
            });
        }

        $(document).ready(function () {

            $("#paListes").on("pagebeforeshow", function (event) {
                getPersonalLists();
                getSharedLists();
            });


            $("#paListItems").on("pagebeforeshow", function (event) {
                var myID = $(this).data("id").replace("list-", "");
                getItems(myID);
            });
        });
    </script>

</head>
<body>

    <div data-role="page" id="paConnect" class="bggradient2">

        <img src="img/logo.png" class="biglogo" />
        <h1 class="title">eddyLists</h1>

        <span class="subtitle">Votre liste qui vous suit partout !</span>
        <br />
        <br />
        <div class="list">
            <input type="text" class="username" value="etienne" data-role="none" />
            <input type="password" class="password" value="1234567890" data-role="none" />
        </div>

        <div class="list">

            <br />
            <br />
            <a href="#paListes" data-role="none" class="myButton" data-transition="flip" id="btnLists">Suivant</a>
        </div>

        <div class="list">
            <br />
            <span class="account">Vous n'avez pas de compte ? Créez-en un !</span>
        </div>
    </div>




    <div data-role="page" id="paListes" class="bggradient2">
        <div data-role="header" data-position="fixed">
            <h1>eddyLists</h1>
        </div>

        <ul data-role="listview" id="my-personal-lists">
            <li data-role="list-divider">Mes listes personnelles</li>
        </ul>

        <ul data-role="listview" id="my-shared-lists">
            <li data-role="list-divider">Mes listes partagées</li>
        </ul>

        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <a href="#dgNewList" class="ui-btn ui-btn-a ui-btn-icon-top ui-icon-plus">Ajouter une liste</a>
            </div>
        </div>
    </div>



    <div data-role="page" id="paListItems" class="bggradient2">
        <div data-role="header" data-position="fixed">
            <h1>eddyLists</h1>
            <a href="#paListes" class="ui-btn-left ui-btn ui-btn-inline ui-mini ui-icon-carat-l ui-btn-icon-left" data-transition="flip">Mes listes</a>
        </div>

        <ul data-role="listview" id="my-list-item"></ul>

        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <a href="#" class="ui-btn ui-btn-a ui-btn-icon-top ui-icon-plus">Ajouter une item</a>
                <a href="#" class="ui-btn ui-btn-a ui-btn-icon-top ui-icon-plus">Partager</a>
            </div>
        </div>
    </div>

    <div data-role="page" data-dialog="true" id="dgNewList">
        Nom de la liste
    </div>

</body>
</html>